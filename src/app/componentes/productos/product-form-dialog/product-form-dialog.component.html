<!-- Header del diálogo -->
<h3 mat-dialog-title class="text-lg font-semibold mb-4 text-gray-900 border-b pb-2">
  {{ tituloDialog }}
</h3>

<!-- Contenido del diálogo -->
<mat-dialog-content class="py-4">
  <form (ngSubmit)="onGuardar()" class="space-y-4">
    <!-- ID -->
    <div>
      <label for="id" class="block text-sm font-medium text-gray-700 mb-1">ID</label>
      <input 
        type="text" 
        id="id" 
        [(ngModel)]="productoLocal.id" 
        name="id" 
        required 
        [readonly]="data.modoEdicion"
        class="w-full px-3 py-2 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 rounded-md transition-colors"
        [class.bg-gray-200]="data.modoEdicion"
        [class.bg-white]="!data.modoEdicion">
    </div>

    <!-- Precio de costo (solo para admin) -->
    <div *ngIf="data.esAdmin">
      <label for="precio_costo" class="block text-sm font-medium text-gray-700 mb-1">Precio de costo</label>
      <input 
        type="number" 
        id="precio_costo" 
        [(ngModel)]="productoLocal.precio_costo" 
        name="precio_costo" 
        required
        min="0"
        step="0.01"
        class="w-full px-3 py-2 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 rounded-md bg-white transition-colors">
    </div>

    <!-- Ganancia (solo para admin) -->
    <div *ngIf="data.esAdmin">
      <label for="ganancia" class="block text-sm font-medium text-gray-700 mb-1">Ganancia (%)</label>
      <input 
        type="number" 
        id="ganancia" 
        [(ngModel)]="productoLocal.ganancia" 
        name="ganancia" 
        required 
        min="0"
        step="0.01"
        class="w-full px-3 py-2 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 rounded-md bg-white transition-colors">
    </div>

    <!-- Descripción -->
    <div>
      <label for="descripcion" class="block text-sm font-medium text-gray-700 mb-1">Descripción</label>
      <input 
        type="text" 
        id="descripcion" 
        [(ngModel)]="productoLocal.descripcion" 
        name="descripcion" 
        required
        class="w-full px-3 py-2 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 rounded-md bg-white transition-colors">
    </div>

    <!-- Stock -->
    <div>
      <label for="stock" class="block text-sm font-medium text-gray-700 mb-1">Stock</label>
      <input 
        type="number" 
        id="stock" 
        [(ngModel)]="productoLocal.stock" 
        name="stock" 
        required 
        min="0"
        class="w-full px-3 py-2 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 rounded-md bg-white transition-colors">
    </div>

    <!-- Categoría -->
    <div>
      <label for="categoria" class="block text-sm font-medium text-gray-700 mb-1">Categoría</label>
      <input 
        type="text" 
        id="categoria" 
        [(ngModel)]="productoLocal.categoria" 
        name="categoria" 
        required
        class="w-full px-3 py-2 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 rounded-md bg-white transition-colors">
    </div>

    <!-- Mensaje de error -->
    <div *ngIf="mensaje" class="p-3 bg-red-50 border border-red-200 rounded-md">
      <p class="text-sm text-red-600">{{ mensaje }}</p>
    </div>
  </form>
</mat-dialog-content>

<!-- Botones del diálogo -->
<mat-dialog-actions class="flex justify-end space-x-3 pt-4 border-t">
  <button 
    type="button" 
    (click)="onCancelar()" 
    [disabled]="cargando"
    class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 font-medium flex items-center">
    <i class="fa-solid fa-times mr-2"></i>
    Cancelar
  </button>
  <button 
    type="button" 
    (click)="onGuardar()" 
    [disabled]="cargando"
    class="px-4 py-2 bg-emerald-500 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 font-medium flex items-center">
    <i class="fa-solid fa-check mr-2"></i>
    {{ textoBoton }}
  </button>
</mat-dialog-actions>

<!-- Spinner de carga -->
<div *ngIf="cargando" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50">
  <div class="bg-white p-4 rounded-lg shadow-lg">
    <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-green-600 mx-auto"></div>
    <p class="mt-2 text-sm text-gray-600">Guardando...</p>
  </div>
</div>