<div class="flex flex-col w-max h-[85vh] overflow-y-auto p-6 text-gray-800">
	<h2 class="mb-4 text-2xl text-center font-semibold text-green-700">
		Detalles del cierre
	</h2>

	<div class="flex-1 overflow-y-auto border border-green-300 shadow-md rounded-lg">
		<table class="w-max table-fixed text-sm">
			<thead class="bg-green-100 text-green-800 uppercase text-xs font-semibold">
				<tr class="text-left">
					<th class="p-3 w-32">Fuente</th>
					<th class="p-3 w-40">Detalle</th>
					<th class="p-3 w-28">Monto</th>
					<th class="p-3 w-28">Efectivo</th>
					<th class="p-3 w-28">Débito</th>
					<th class="p-3 w-28">Crédito</th>
					<th class="p-3 w-36">Transferencia</th>
					<th class="p-3 w-28">Cheque</th>
				</tr>
			</thead>
			<tbody class="divide-y divide-green-200 bg-white" *ngIf="!isLoading; else carga">
				<tr *ngFor="let item of detailsCurrent" class="hover:bg-green-50">
					<!-- fuente -->
					<td class="p-3 truncate">
						{{ item?.fuente === 'pagos_mensuales' ? 'Pagos mensuales' : 'Caja diaria' }}
					</td>

					<!-- detalle -->
					<td class="p-3 truncate">
						{{ item?.detalle }}
					</td>

					<!-- monto -->
					<td class="p-3 whitespace-nowrap">
						{{ (item?.monto ?? getTotal(item)) | currency:'ARS':'symbol-narrow':'1.2-2':'es-AR' }}
					</td>

					<!-- Efectivo -->
                    <td class="p-3 whitespace-nowrap">
                      <ng-container *ngIf="item?.fuente === 'caja'; else pagoEfectivo">
                        {{ item?.efectivo | currency:'ARS':'symbol-narrow':'1.2-2':'es-AR' }}
                      </ng-container>
                      <ng-template #pagoEfectivo>
                        <span *ngIf="(item?.metodo_pago ?? item?.metodoPago) === 'Efectivo'">
                          {{ (item?.pago_monto ?? item?.monto) | currency:'ARS':'symbol-narrow':'1.2-2':'es-AR' }}
                        </span>
                        <span *ngIf="(item?.metodo_pago ?? item?.metodoPago) !== 'Efectivo'">-</span>
                      </ng-template>
                    </td>

                    <!-- Débito -->
                    <td class="p-3 whitespace-nowrap">
                      <ng-container *ngIf="item?.fuente === 'caja'; else pagoDebito">
                        {{ item?.debito | currency:'ARS':'symbol-narrow':'1.2-2':'es-AR' }}
                      </ng-container>
                      <ng-template #pagoDebito>
                        <span *ngIf="(item?.metodo_pago ?? item?.metodoPago) === 'Debito'">
                          {{ (item?.pago_monto ?? item?.monto) | currency:'ARS':'symbol-narrow':'1.2-2':'es-AR' }}
                        </span>
                        <span *ngIf="(item?.metodo_pago ?? item?.metodoPago) !== 'Debito'">-</span>
                      </ng-template>
                    </td>

                    <!-- Crédito -->
                    <td class="p-3 whitespace-nowrap">
                      <ng-container *ngIf="item?.fuente === 'caja'; else pagoCredito">
                        {{ item?.credito | currency:'ARS':'symbol-narrow':'1.2-2':'es-AR' }}
                      </ng-container>
                      <ng-template #pagoCredito>
                        <span *ngIf="(item?.metodo_pago ?? item?.metodoPago) === 'Credito'">
                          {{ (item?.pago_monto ?? item?.monto) | currency:'ARS':'symbol-narrow':'1.2-2':'es-AR' }}
                        </span>
                        <span *ngIf="(item?.metodo_pago ?? item?.metodoPago) !== 'Credito'">-</span>
                      </ng-template>
                    </td>

                    <!-- Transferencia -->
                    <td class="p-3 whitespace-nowrap">
                      <ng-container *ngIf="item?.fuente === 'caja'; else pagoTransferencia">
                        {{ item?.transferencia | currency:'ARS':'symbol-narrow':'1.2-2':'es-AR' }}
                      </ng-container>
                      <ng-template #pagoTransferencia>
                        <span *ngIf="(item?.metodo_pago ?? item?.metodoPago) === 'Transferencia'">
                          {{ (item?.pago_monto ?? item?.monto) | currency:'ARS':'symbol-narrow':'1.2-2':'es-AR' }}
                        </span>
                        <span *ngIf="(item?.metodo_pago ?? item?.metodoPago) !== 'Transferencia'">-</span>
                      </ng-template>
                    </td>

                    <!-- Cheque -->
                    <td class="p-3 whitespace-nowrap">
                      <ng-container *ngIf="item?.fuente === 'caja'; else pagoCheque">
                        {{ item?.cheque | currency:'ARS':'symbol-narrow':'1.2-2':'es-AR' }}
                      </ng-container>
                      <ng-template #pagoCheque>
                        <span *ngIf="(item?.metodo_pago ?? item?.metodoPago) === 'Cheque'">
                          {{ (item?.pago_monto ?? item?.monto) | currency:'ARS':'symbol-narrow':'1.2-2':'es-AR' }}
                        </span>
                        <span *ngIf="(item?.metodo_pago ?? item?.metodoPago) !== 'Cheque'">-</span>
                      </ng-template>
                    </td>
				</tr>
			</tbody>
		</table>
	</div>

	<ng-template #carga>
		<tbody>
			<tr>
				<td colspan="7" class="py-16">
					<div class="flex justify-center">
						<div class="animate-spin rounded-full h-12 w-12 border-t-4 border-green-600 border-solid"></div>
					</div>
				</td>
			</tr>
		</tbody>
	</ng-template>
</div>
