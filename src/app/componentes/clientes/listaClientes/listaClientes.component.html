<div class="p-0 overflow-y-auto h-[75vh] border border-gray-200 rounded">
  <table class="w-full mt-4 text-left table-auto min-w-max border-collapse">
    <thead>
      <tr>
        <th
          class="sticky top-0 bg-slate-50 z-10 p-4 w-16 border-b border-slate-300 transition-colors cursor-pointer hover:bg-slate-100">
          <p class="flex items-center justify-between gap-2 font-sans text-sm font-normal leading-none text-slate-500">
            Tipo
          </p>
        </th>
        <th
          class="sticky top-0 bg-slate-50 z-10 p-4 w-20 border-b border-slate-300 transition-colors cursor-pointer hover:bg-slate-100">
          <p class="flex items-center justify-between gap-2 font-sans text-sm font-normal leading-none text-slate-500">
            Num de cliente
          </p>
        </th>
        <th
          class="sticky top-0 bg-slate-50 z-10 p-4 w-24 border-b border-slate-300 transition-colors cursor-pointer hover:bg-slate-100">
          <p class="flex items-center justify-between gap-2 font-sans text-sm font-normal leading-none text-slate-500">
            Cliente
          </p>
        </th>
        <th
          class="sticky top-0 bg-slate-50 z-10 p-4 w-16 border-b border-slate-300 transition-colors cursor-pointer hover:bg-slate-100">
          <p class="flex items-center justify-between gap-2 font-sans text-sm font-normal leading-none text-slate-500">
            Mensual
          </p>
        </th>
        <th
          class="sticky top-0 bg-slate-50 z-10 p-4 w-16 border-b border-slate-300 transition-colors cursor-pointer hover:bg-slate-100">
          <p class="flex items-center justify-between gap-2 font-sans text-sm font-normal leading-none text-slate-500">
            Bonificacion
          </p>
        </th>
        <th
          class="sticky top-0 bg-slate-50 z-10 p-2 w-16 border-b border-slate-300 transition-colors cursor-pointer hover:bg-slate-100">
          <p class="flex items-center justify-between gap-2 font-sans text-sm font-normal leading-none text-slate-500">
            Monto
          </p>
        </th>
        <th
          class="sticky top-0 bg-slate-50 z-10 p-2 w-16 border-b border-slate-300 transition-colors cursor-pointer hover:bg-slate-100">
          <p class="flex items-center justify-between gap-2 font-sans text-sm font-normal leading-none text-slate-500">
            Pago
          </p>
        </th>
        <th
          class="sticky top-0 bg-slate-50 z-10 p-2 w-20 border-b border-slate-300 transition-colors cursor-pointer hover:bg-slate-100">
          <p class="flex justify-center items-center gap-2 font-sans text-sm font-normal leading-none text-slate-500">
            Modificar
          </p>
        </th>
      </tr>
    </thead>
    <tbody *ngIf="clientsOfMonth.length > 0">
      <tr *ngFor="let client of clientsOfMonth | filtroClientes:'cliente':clientesService.filtroCliente">
        <td class="p-4 w-16 border-b border-slate-200">
          <p class="text-sm text-slate-500">{{ client.tipo }}</p>
        </td>
        <td class="p-4 w-20 border-b border-slate-200">
          <p class="text-sm text-slate-500">{{ client.id_client }}</p>
        </td>
        <td class="p-4 w-24 border-b border-slate-200">
          <p class="text-sm text-slate-500">{{ client.cliente }}</p>
        </td>
        <td class="p-4 w-16 border-b border-slate-200">
          <p class="text-sm text-slate-500">{{ client.mensual }}</p>
        </td>
        <td class="p-4 w-16 border-b border-slate-200">
          <p class="text-sm text-slate-500">{{ client.bonificacion }}</p>
        </td>
        <td class="p-4 w-16 border-b border-slate-200">
          <p class="text-sm text-slate-500">{{ client.monto }}</p>
        </td>
        <td class="p-4 w-16 border-b border-slate-200">
          <p class="text-sm text-slate-500">{{ client.periodo_hasta | date: 'yyyy-MM' }}</p>
        </td>
        <td class="p-2 w-20 border-b border-slate-200">
          <div class="flex gap-2 justify-center items-center">
            <!-- Botón Editar siempre visible -->
            <button (click)="updateClient(client)" class="text-slate-500 hover:text-blue-600" title="Editar">
              <i class="fa-solid fa-pencil"></i>
            </button>

            <!-- Spinner mientras se elimina o botón eliminar -->
            <ng-container *ngIf="eliminandoClienteId === client.id_client; else botonEliminar">
              <i class="fa-solid fa-spinner fa-spin text-gray-500 text-lg" title="Eliminando..."></i>
            </ng-container>
            <ng-template #botonEliminar>
              <button (click)="deleteClient(client)" class="text-slate-500 hover:text-red-600" title="Eliminar">
                <i class="fa-solid fa-trash"></i>
              </button>
            </ng-template>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>