<!-- Header del diálogo -->
<h3 mat-dialog-title class="text-lg font-semibold mb-4 text-gray-900 border-b pb-2 flex items-center">
  <i class="fa-solid fa-file-lines mr-3 text-blue-600"></i>
  {{ data.titulo || 'Logs del Sistema' }}
</h3>

<!-- Contenido del diálogo -->
<mat-dialog-content class="py-4">
  <!-- Filtros -->
  <div class="mb-6 grid grid-cols-1 md:grid-cols-2 gap-4">
    <div class="space-y-2">
      <label class="block text-sm font-semibold text-gray-700">Filtrar por fecha:</label>
      <input 
        type="date"
        [(ngModel)]="filtroFecha"
        (ngModelChange)="aplicarFiltros()"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
    </div>
    <div class="space-y-2">
      <label class="block text-sm font-semibold text-gray-700">Tipo de log:</label>
      <select 
        [(ngModel)]="filtroAccion"
        (ngModelChange)="aplicarFiltros()"
        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200">
        <option value="">Todos</option>
        <option value="actualizacion">Actualizaciones</option>
        <option value="eliminacion">Eliminaciones</option>
      </select>
    </div>
  </div>

  <!-- Área de contenido de logs -->
  <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 min-h-[350px] border border-gray-200">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-bold text-gray-800">Información del Sistema</h3>
      <button 
        (click)="cargarLogs()" 
        class="text-blue-600 hover:text-blue-800 font-medium text-sm"
        [disabled]="cargando">
        <i class="fa-solid fa-refresh mr-1" [class.animate-spin]="cargando"></i>
        Actualizar
      </button>
    </div>
    
    <!-- Loading -->
    <div *ngIf="cargando" class="flex justify-center items-center py-12">
      <i class="fa-solid fa-spinner animate-spin text-2xl text-blue-600"></i>
      <span class="ml-2 text-gray-600">Cargando logs...</span>
    </div>
    
    <!-- Lista de logs -->
    <div *ngIf="!cargando" class="space-y-4 max-h-96 overflow-y-auto">
      <div 
        *ngFor="let log of logsFiltrados" 
        class="bg-white p-4 rounded-lg border-l-4 shadow-sm hover:shadow-md transition-shadow duration-200"
        [ngClass]="{
          'border-blue-500': log.accion === 'actualizacion',
          'border-red-500': log.accion === 'eliminacion',
          'border-green-500': log.accion === 'creacion'
        }">
        <div class="flex justify-between items-start mb-2">
          <span 
            class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
            [ngClass]="{
              'bg-blue-100 text-blue-800': log.accion === 'actualizacion',
              'bg-red-100 text-red-800': log.accion === 'eliminacion',
              'bg-green-100 text-green-800': log.accion === 'creacion'
            }">
            <i class="fa-solid fa-info-circle mr-1"></i>
            {{ log.accion.toUpperCase() }}
          </span>
          <span class="text-xs text-gray-500 font-mono">{{ log.fecha_y_hora | date:'dd/MM/yyyy HH:mm:ss' }}</span>
        </div>
        <p class="text-sm text-gray-800 font-medium">{{ log.accion }} del producto: "{{ log.id_producto }}"</p>
        <p class="text-xs text-gray-600 mt-1">Usuario: {{ log.nombre || 'N/A' }} (ID: {{ log.id_user }})</p>
      </div>

      <!-- Mensaje cuando no hay logs -->
      <div *ngIf="logsFiltrados.length === 0" class="flex flex-col items-center justify-center py-12">
        <i class="fa-solid fa-file-lines text-4xl text-gray-300 mb-4"></i>
        <p class="text-gray-500 text-center font-medium">No hay logs disponibles</p>
        <p class="text-gray-400 text-sm text-center mt-1">Los logs aparecerán aquí cuando haya actividad</p>
      </div>
    </div>
  </div>
</mat-dialog-content>

<!-- Botones del diálogo -->
<mat-dialog-actions class="flex justify-end space-x-3 pt-4 border-t">
  <button 
    type="button" 
    (click)="onCerrar()" 
    class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors duration-200 font-medium flex items-center">
    <i class="fa-solid fa-times mr-2"></i>
    Cerrar
  </button>
</mat-dialog-actions>